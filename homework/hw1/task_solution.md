# Урок 1. Механизмы пространства имен

---

### Задание:
необходимо продемонстрировать изоляцию одного и того же приложения (как решено на семинаре - командного интерпретатора) в различных пространствах имен.

Формат сдачи ДЗ: предоставить доказательства выполнения задания посредством ссылки на google-документ с правами на комментирование/редактирование.
Результатом работы будет: текст объяснения, логи выполнения, история команд и скриншоты (важно придерживаться такой последовательности).
В названии работы должны быть указаны ФИ, номер группы и номер урока.

---

### Решение:
Команда unshare в Linux позволяет пользователям выполнять команды в новых пользовательских пространствах имён.
Причем можно создавать различные типы пространства имен.
Запустим команду с параметрами:
1. -pf Создает новое пространство имен и делает наш процесс дочерним от unshare
2. -n Создает новое сетевое пространство
3. подразумевает создание нового
пространства имен для монтирования

`sudo unshare -pf -n --mount-proc bash`
![](images\namespace1.PNG)

---

Открываем новый терминал, вводим команду для просмотра работающих процессов ps -afx
 ![](images\namespace2.PNG)
Наблюдаем несколько родительских unsahre процессов, которые породили одинаковые процессы Bash, это и наше пространство.

Для проверки и наглядности смотрим той же командой ps -afx в изолированном терминале.
![](images\namespace3.png)
Здесь мы можем видеть, что изолированная оболчка видит всего два процесса. При этом PID процессов начинается с 1.

---

Теперь, в оба терминала отправляем команду hostname, что бы увидеть наш хост.
`hostname`
![](images\namespace4.PNG)
Как мы можем заметить - хоcт и там и там одинаков. А теперь, в изолированном терминале выполняем команду:
`sudo unshare -u bash`
Команда $ unshare запускает программу (опционально) в новом namespace. Флаг -u говорит ей запустить bash в новом UTS namespace. Обратите внимание, что наш новый процесс bash указывает на другой файл UTS, тогда как все остальные остаются прежними.

Одним из следствий того, что мы только что проделали, является то, что теперь мы можем изменить системный hostname из нашего нового процесса bash и это не повлияет ни на какой другой процесс в системе. Изменим наш хост в изолированном терминале, например:
`hostname gb`
![](images\namespace5.PNG)
Этими манипуляциями мы доказали, что научились запускать процессы в разных namespace с возможностью опционально изолировать нужные нам направления.

